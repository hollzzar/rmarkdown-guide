# Formatting {#format}

1. YAML parameters and references
2. Inline $\LaTeX$ and CSS code
3. Custom edits to templates

## YAML parameters

There are several [general YAML parameters](https://ymlthis.r-lib.org/articles/yaml-fieldguide.html) that you can include in the YAML header to format your document. There are also template-specific parameters, but you'll need to look at the specific package documentation to know what these are.

## YAML references {#yamlref}

In your YAML header, you can also reference other documents for formatting and content. The most common ones I use are .bib and .csl files for citing and formatting references, respectively, in manuscripts and reports. These files all go in the same directory as your .Rmd file.

- Bibliography: [.bib](https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html) (I use BibDesk for my reference manager)
- Citation style language files: [.csl](https://github.com/citation-style-language/styles)
  - My [CV](https://github.com/hollzzar/zaharchuk-cv) repo has a customized APA 6 .csl file for arranging references in descending order by date
  - My [Psychonomics poster](https://github.com/hollzzar/psychonomics-poster) repo also has a customized APA 6 .csl to fix some small bugs
- $\LaTeX$ styling: .cls
- HTML styling: .css
- Interacting with pandoc: .lua
  - Download [this .lua file](https://github.com/pandoc/lua-filters/tree/master/multiple-bibliographies) to use multiple bibliographies in one document, as I do in my [CV](https://github.com/hollzzar/zaharchuk-cv) (one for publications, another for conference presentations)
  - Follow [these instructions](https://cran.rstudio.com/web/packages/rmdfiltr/vignettes/replace_ampersands.html) for accessing the .lua file for properly formatting in-text references (pandoc defaults to using ampersands where APA requires "and")
  - See the following example for including both of these .lua filters in one document
  
```{r format_lua, echo=FALSE}
knitr::include_graphics("images/lua_example.png")
```

Below, I've included an example from [my CV](https://github.com/hollzzar/zaharchuk-cv) with both template-specific YAML parameters and references.

```{r format_example_ref, echo=FALSE}
knitr::include_graphics("images/references_example.png")
```

## In-line code

R Markdown supports in-line code for custom formatting. In PDFs, you can use $\LaTeX$ code, type-setting commands (e.g., \\vspace{12pt}), and call specific packages. There are useful lists of symbols [here](https://www.rpi.edu/dept/arc/training/latex/LaTeX_symbols.pdf) and [here](https://www.tug.org/tugboat/tb17-2/tb51rei.pdf). In HTML documents, you can include [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS) commands.

### $\LaTeX$

I've included examples of calling packages in the YAML header and using inline functions from my statistics homework below (also see [Writing Your Thesis with R Markdown](https://www.rosannavanhespen.nl/thesis_in_rmarkdown/)).

```{r format_latex, echo=FALSE}
knitr::include_graphics("images/latex_packages.png")
knitr::include_graphics("images/latex_calls.png")
```

```{r format_example_latex, echo=FALSE}
knitr::include_graphics("images/latex_example.png")
```

### CSS/HTML

Here are some examples of using CSS from [my Psychonomics poster](https://github.com/hollzzar/psychonomics-poster/blob/master/Psychonomics.Rmd).

```{r format_example_css, echo=FALSE}
knitr::include_graphics("images/css_example.png")
```

```{r format_example_html, echo=FALSE}
knitr::include_graphics("images/html_example.png")
```

## Editing templates

To make extremely custom edits to templates, sometimes you have to edit the template documents directly:

1. Find out where your computer stores your R packages and edit the template there
2. If the template generates a style document (e.g., .cls) in the directory with your .Rmd file, you can usually edit that without going to the package

### Package documents

```{r template}
# Make dataframe with installed packages
pkgs <- installed.packages() %>%
  as.data.frame()

# Pull posterdown package 
pstr <- pkgs %>% 
  select(Package, LibPath, Version, Depends, Imports) %>%
  dplyr::filter(Package == "posterdown")

# Make table
kable(pstr) %>%
  kable_styling(bootstrap_options = "condensed", 
                font_size = 18)
```

To edit package documents once you've located them, you should proceed with caution:

- Save the original template and move it to a different location
- Make one change at a time
- Name the updated template with the same name in the same place as the original

```{r format_template, echo=FALSE}
knitr::include_graphics("images/template_package.png")
```

### Directory documents

Some templates output formatting documents in your working directory. These are easier to access and edit. For example, knitting the `vitae::awesomecv` template created a .cls file that I could edit to change font sizes/colors.

```{r format_template_dir, echo=FALSE}
knitr::include_graphics("images/template_dir.png")
```